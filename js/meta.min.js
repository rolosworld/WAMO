/*
 Copyright (c) 2010 Rolando González Chévere <rolosworld@gmail.com>
 
 This file is part of Meta.
 
 Meta is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License version 3
 as published by the Free Software Foundation.
 
 Meta is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
 
 You should have received a copy of the GNU General Public License
 along with Meta.  If not, see <http://www.gnu.org/licenses/>.
*/
(function(){var u=this,v=!!u.ActiveXObject,G={name:"Meta",author:"Rolando Gonz\u00e1lez, rolosworld@gmail.com",version:"2010.02.10"},j=u.Meta=function(){function b(){return j}function c(f){if(j.its(f,"function"))return f;var l=j(),h=f.constructor;l=l.constructor;var i;if(h)l.prototype=new h;for(i in f)if(f.hasOwnProperty(i))l.prototype[i]=f[i];return l}function e(f){function l(){this.constructor=l;this.info=G;this.extend=function(i,m){var a=["under","extend","info"];m=m||{};m.exclude=m.exclude?m.exclude.concat(a): a;return b().inherit(this,i,m)}}var h;if(f!==void 0)h=c(f);if(h)l.prototype=new h;l.prototype.under=function(i){if(h){var m=[],a,d=this.under,g=arguments.length,k=h.prototype;for(a=1;a<g;a++)m.push(arguments[a]);this.under=k.under;m=k[i].apply(this,m);this.under=d;return m}};return l}return function(f){return new (e(f))}}();j.extensions={};j.son=function(b){function c(){}c.prototype=b;b=new c;b.constructor=c;return b};j.extend=function(b,c,e){e=e||[];for(var f in c)if(f!="constructor"&&b!=c[f]&&j.indexOf(e, f)<0)b[f]=c[f];return b};j.inherit=function(b,c,e){var f=[],l=[],h={};if(e){l=e.exclude||l;f=e.params||f}if(typeof c=="function"){c.apply(h,f);c=h}e=b.constructor;j.extend(e?e.prototype:b,c,l);return b};j.each=function(b,c,e){var f;if(e)for(f in b){if(c.call(b,b[f],f)===false)return false}else{f=0;for(e=b.length;f<e;f++)if(c.call(b,b[f],f)===false)return false}return true};j.its=function(b,c){var e=typeof b;if(c==e)return true;if(e=="object"||e=="function")e=b?b.nodeType?"element":Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1].toLowerCase(): "null";else if(e=="number")if(isNaN(b))e="nan";else isFinite(b)||(e=b>0?"infinite":"-infinite");if(c)return c==e;return e};j.obj2array=function(b,c){if(!c&&!v)return Array.prototype.slice.call(b);else{var e=[];j.each(b,function(f){e.push(f)},c);return e}};j.indexOf=function(b,c,e){for(var f=b.length;f--;)if(e){if(b[f]==c)break}else if(b[f]===c)break;return f};j.unique=function(b){var c=[],e,f;e=0;for(f=b.length;e<f;e++)j.indexOf(c,b[e])<0&&c.push(b[e]);return c};j.has=function(b,c){return b&&b[c]!== void 0&&b[c]!==null};j.genProperties=function(b,c,e){var f=0;b=b.split(",");for(var l=b[0];f<b.length;l=b[++f])e[l]=c(l)};j.toggle=function(b,c,e){e=e||false;return function(){return((e=!e)?b:c).apply(this,arguments)}};j.ajax=function(b){function c(){if(l){var g=i.readyState;if(!a&&g==4)l.call(m,m);else l[g]&&l[g].call(m,m)}}var e,f;if(b.post){e="POST";f={"Content-type":"application/x-www-form-urlencoded"}}var l=b.callbacks,h=b.async===void 0?j.ajax.async:b.async;e=b.method?b.method:e;f=b.headers? b.headers:f;var i=v?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,m={status:function(){return i.status},text:function(){return i.responseText},json:function(){return eval("("+(m.text()||"null")+")")},xml:function(){return i.responseXML}},a=j.its(l,"array");i.open(e||"GET",b.url,h);if(h)i.onreadystatechange=c;if(f)for(var d in f)i.setRequestHeader(d,f[d]);i.send(b.post);h||c();return i};j.ajax.async=true;j.core=j().extend({_:null,$:function(b){return(new this.constructor).set(b)},its:function(b){return j.its(this._, b)},get:function(){return this._},set:function(b){this._=b;return this},wrap:function(b,c){return this._[b].apply(this._,c)},copy:function(){return this.$().set(this.get())},callback:function(b){for(var c=this,e=[],f=1,l=arguments;f<l.length;f++)e.push(l[f]);return function(){return c[b].apply(c,e)}},getMe:function(){return this}});j.string=j(j.core).extend({_:"",$:function(b){return(new this.constructor).set(b||"")},set:function(b){return this.under("set",""+b)},len:function(){return this.get().length}, dos2unix:function(){return this.replace(/\r\n|\r/g,"\n")},unix2dos:function(){return this.replace(/\n/g,"\r\n")},stripTags:function(){return this.replace(/<\/?[^>]+>/g,"")},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;")},unescapeHTML:function(){var b=document.createElement("div");b.innerHTML=this.stripTags().get();return this.set(b.childNodes[0]?b.childNodes[0].nodeValue:"")},trim:function(){return this.replace(/^\s+|\s+$/g, "")},rtrim:function(){return this.replace(/\s+$/,"")},ltrim:function(){return this.replace(/^\s+/,"")},insertAt:function(b,c){var e=this.get();return this.set(e.substr(0,b)+c+e.substr(b))},addSlashes:function(){return this.replace(/\\/g,"\\\\").replace(/\'/g,"\\'")},stripSlashes:function(){return this.replace(/\\'/g,"'").replace(/\\\\/g,"\\")},nl2br:function(){return this.dos2unix().replace(/\n/g,"<br/>")},br2nl:function(){return this.replace(/<br\s*\/?>/gi,"\n")},toInt:function(){return parseInt(this.get().match(/\d/g).join(""), 10)}}).extend(function(){var b=j.genProperties;b("replace,concat,substr,substring,slice,toUpperCase,toLowerCase",function(c){return function(){return this.set(this.wrap(c,arguments))}},this);b("charAt,charCodeAt,indexOf,lastIndexOf,search,match,split,valueOf",function(c){return function(){return this.wrap(c,arguments)}},this)});j.array=j(j.core).extend({_:[],$:function(){var b=new this.constructor,c;b.set([]);j.each(arguments,function(e){c=j.its(e);if(c=="array")b.set(e);else c!="undefined"&&b.push(e)}); return b},get:function(b){var c=this.under("get");return j.its(b,"number")?c[b]:c},set:function(b,c){if(j.its(c,"number"))this.get()[c]=b;else{j.its(b,"array")||(b=[b]);this.under("set",b)}return this},indexOf:function(b,c){var e=this.get(),f=e.length;for(c=c||0;c<f;c++)if(e[c]===b)return c;return-1},lastIndexOf:function(b,c){var e=this.get();for(c=c+1||e.length;c--;)if(e[c]===b)break;return c},some:function(b,c){c=c||this;var e=this.get();return!j.each(e,function(f,l){if(b.call(c,f,l,e))return false})}, every:function(b,c){c=c||this;var e=this.get();return j.each(e,function(f,l){if(!b.call(c,f,l,e))return false})},filter:function(b,c){c=c||this;var e=[],f=this.get();j.each(f,function(l,h){b.call(c,l,h,f)&&e.push(l)});return e},forEach:function(b,c){c=c||this;var e=this.get();j.each(e,function(f,l){b.call(c,f,l,e)});return this},map:function(b,c){c=c||this;var e=[],f=this.get();j.each(f,function(l,h){e.push(b.call(c,l,h,f))});return e},numSort:function(){return this.sort(function(b,c){return b-c})}, insert:function(b,c){c==void 0?this.push(b):this.splice(c,0,b);return this},drop:function(b,c){return this.splice(b,c||1)},unique:function(){return this.set(j.unique(this.get()))},len:function(){return this.get().length},reduce:function(b,c){var e=this.len(),f=0,l=this.get();for(c=c||l[f++];f<e;f++)c=b.call(this,c,l[f],f,l);return c},reduceRight:function(b,c){var e=this.len(),f=e-1,l=this.get();if(!(e<1&&!c)){for(e=c||l[f--];f>=0;f--)e=b.call(this,e,l[f],f,l);return e}},shuffle:function(){for(var b= this.get(),c=b.length,e=c-1,f,l;c--;){f=Math.round(Math.random()*e);l=b[c];b[c]=b[f];b[f]=l}return this}}).extend(function(){var b=j.genProperties;b("push,sort,splice,unshift,reverse",function(c){return function(){this.wrap(c,arguments);return this}},this);b("pop,shift,join",function(c){return function(){return this.wrap(c,arguments)}},this);b("concat,slice",function(c){return function(){return this.set(this.wrap(c,arguments))}},this)});j.events=j(j.core).extend(function(){var b={},c=j.array.$(); this.onNewEvent=function(){};this.onEmptyEvent=function(){};this.onFireEvent=function(){};this.addEvent=function(e,f,l,h){h=h===void 0?1:h;var i=-1,m=this;if(b[e])i=m.indexOfEvent(e,f);else b[e]=[];if(i<0){i={type:e,obj:f,cb:function(){return m.fireEvent.apply(m,c.set([e,f]).concat(j.obj2array(arguments)).get())},fn:[]};b[e].push(i);m.onNewEvent(i)}else i=b[e][i];c.set(i.fn);if(j.its(l,"array")){c.concat(l);i.fn=c.get()}else if(h||c.indexOf(l)<0)c.push(l);return m};this.getEvent=function(e,f){return b[e]&& b[e][f]?b[e][f]:null};this.getObjectEvents=function(e){var f=[],l,h=this;for(var i in b){l=h.indexOfEvent(i,e);l>-1&&f.push(b[i][l])}return f};this.indexOfEvent=function(e,f){var l=-1;if(!b[e])return l;c.set(b[e]).every(function(h,i){if(h.obj==f){l=i;return false}return true});return l};this.fireEvent=function(e,f){var l=this,h=l.indexOfEvent(e,f),i=true,m;if(h<0)return false;h=b[e][h];m=[];j.each(arguments,function(a,d){d>1&&m.push(a)});j.each(h.fn,function(a){if(a.apply(f,m)===false)i=false});l.onFireEvent(h, i,m);return i};this.rmEvent=function(e,f,l){var h=-1,i,m=this.indexOfEvent(e,f);if(m<0)return this;f=b[e][m];if(l){i=c.set(f.fn);h=i.indexOf(l);h>-1&&i.drop(h)}else f.fn=[];if(!f.fn.length){c.set(b[e]).drop(m);this.onEmptyEvent(f)}return this};this.rmObject=function(e){var f=this;j.each(b,function(l,h){f.rmEvent(h,e)},1);return f};this.flush=function(e){e=e||function(){return 1};var f=this,l=[],h;j.each(b,function(i,m){for(h=i.length;h--;)e(m,i[h].obj)&&f.rmEvent(m,i[h].obj);i.length||l.push(m)}, 1);for(h=l.length;h--;)delete b[l[h]];return f};this.ev=b});j.domevent=j(j.events).extend(j.array).extend({valid_type:" abort blur change click dblclick error focus keydown keypress keyup load mousedown mousemove mouseout mouseover mouseup reset resize select submit unload ",onNewEvent:function(b){if(this.valid_type.indexOf(" "+b.type+" ")!=-1)if(j.has(b.obj,"addEventListener"))b.obj.addEventListener(b.type,b.cb,false);else j.has(b.obj,"attachEvent")&&b.obj.attachEvent("on"+b.type,b.cb)},onEmptyEvent:function(b){if(this.valid_type.indexOf(" "+ b.type+" ")!=-1)if(j.has(b.obj,"removeEventListener"))b.obj.removeEventListener(b.type,b.cb,false);else j.has(b.obj,"detachEvent")&&b.obj.detachEvent("on"+b.type,b.cb)},onFireEvent:function(b,c,e){if(!(c||this.valid_type.indexOf(" "+b.type+" ")==-1)){e[0].cancelBubble=true;e[0].returnValue=false;e[0].stopPropagation&&e[0].stopPropagation();e[0].preventDefault&&e[0].preventDefault()}},on:function(b,c){var e=this;if(c)return e.forEach(function(f){e.addEvent(b,f,c)})},fire:function(b){var c=this;return c.forEach(function(e){e["on"+ b]&&e["on"+b]();c.fireEvent(b,e)})},rmOn:function(b,c){var e=this;return e.forEach(function(f){e.rmEvent(b,f,c)})},cleanEvents:function(){return this.flush(function(b,c){return c.parentNode===null})}});j.domevent.addEvent("unload",u,function(){j.events.flush();document&&document.body&&j.dom.purge(document.body)});j.select=function(){function b(h,i,m){var a,d=0;if(h){d=1;for(a in i)if(i[a]&&!m[a](h,i[a])){d=0;break}}return d}var c={CHUNKER:/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]+['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[]+)+|[>+~])(\s*,\s*)?/g, ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/g,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/g,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/g,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/g,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/g,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/g,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/g,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/g},e={"=":function(h,i){return h== i},"!=":function(h,i){return h!=i},"~=":function(h,i){return h!==null&&(" "+h+" ").indexOf(i)>-1},"^=":function(h,i){return h!==null&&h.indexOf(i)==0},"*=":function(h,i){return h!==null&&h.indexOf(i)>-1},"$=":function(h,i){return h!==null&&h.lastIndexOf(i)+i.length==h.length},"|=":function(h,i){return h==i||h.indexOf(i+"-")==0},"":function(h){return h!==null}},f={tag:function(h,i){return h.nodeName==i||i=="*"},className:function(h,i){return(h=h.className)&&(" "+h+" ").indexOf(" "+i+" ")>-1},attr:function(h, i){for(var m,a,d=i.length;d--;){a=i[d];m=a[1];if(h.nodeType==1){m=h.getAttribute(m);if(m!==null&&a[2](m,a[4]))continue}return 0}return 1},pseudo:function(){return 0},nest:function(h,i){var m=i[0];i=i[1];var a;if(!h)return 0;if(m[parseInt(h.getAttribute(i),10)]!=h){a=m.length;h.setAttribute(i,a);m[a]=h;return 1}return 0}},l={">":function(h,i,m,a,d,g,k){i=h.childNodes;var n=[];m=0;for(a=i.length;m<a;m++){h=i[m];h.nodeType==1&&g(h,d,k)&&n.push(h)}return n},"~":function(h,i,m,a,d,g,k){for(i=[];h=h.nextSibling;)h.nodeType== 1&&g(h,d,k)&&i.push(h);return i},"+":function(h,i,m,a,d,g,k){for(;(h=h.nextSibling)&&h.nodeType!=1;);return g(h,d,k)?[h]:[]}};return function(h,i){i=i||document;if(i.querySelectorAll)return j.obj2array(i.querySelectorAll(h));var m=c.CHUNKER,a,d,g,k,n,o=[i],q=c.ID,p=c.CLASS,s=c.ATTR,y=c.TAG,E=i.nodeType==9?i:i.ownerDocument,w,B,C,r,A,x,H=E.documentElement.nodeName!=="HTML",z,F=0,D=[],t={};for(m.lastIndex=0;a=m.exec(h);){k=a[1];if(k==">"||k=="~"||k=="+")n=l[k];else{z=[];q.lastIndex=0;if(d=q.exec(k)){r= E.getElementById(d[1]);o=f.nest(r,[z,"data-metaNest"])?[r]:[]}else{t.nest=[z,"data-metaNest"];t.attr=[];for(s.lastIndex=0;(d=s.exec(k))!==null;){d[2]=e[d[2]||""];t.attr.push(d)}if(!t.attr.length)t.attr=0;if(!t.attr){p.lastIndex=0;d=p.exec(k);t.className=d?d[1]:d}y.lastIndex=0;d=(d=y.exec(k))?d[1]:"*";d=H?d:d.toUpperCase();t.tag=d;A=[];w=0;for(B=o.length;w<B;w++){r=o[w];if(n)A=A.concat(n(r,d,"data-metaNest",z,t,b,f));else{p.lastIndex=0;if((g=p.exec(k))&&r.getElementsByClassName){x=r.getElementsByClassName(g[1]); g=0}else x=r.getElementsByTagName(d);if(!g)t.className=0;g=0;for(C=x.length;g<C;g++){r=x[g];b(r,t,f)&&A.push(r)}}}o=A}n=null;if(a[2]&&a[2].replace(/^\s+|\s+$/g,"")==","){D[F++]=o;o=[i]}}}D[F]=o;z=[];o=[];w=0;for(B=D.length;w<B;w++){x=D[w];g=0;for(C=x.length;g<C;g++){r=x[g];f.nest(r,[z,"data-metaNest"])&&o.push(r)}}return o}}();j.sandbox=function(){var b=document.createElement("iframe"),c,e;b.style.display="none";document.body.appendChild(b);e=frames[frames.length-1];c=e.document;c.writeln("<script>window.sandbox=window.ActiveXObject?this:{eval:function(s){return eval(s)}};<\/script>"); c.close();return{eval:function(f){return e.sandbox.eval(f)},include:function(f){var l=c.createElement("script");l.src=f;c.body.appendChild(l)}}};j.dom=j(j.domevent).extend(function(){function b(){i=j.sandbox();return m=i.eval('document.createElement("div");')}function c(a){if(a=="float")a=v?"styleFloat":"cssFloat";a=a.split("-");for(var d=1,g=a.length,k;d<g;d++){k=a[d];a[d]=k.charAt(0).toUpperCase();a[d]+=k.substr(1)}return a.join("")}function e(a){return a.value!==null&&a.value!==void 0&&a.value.length> 0?a.value:a.text}var f={before:function(a,d,g){g&&g.insertBefore(d,a)},after:function(a,d,g){g&&g.insertBefore(d,a.nextSibling)},replace:function(a,d,g){g&&g.replaceChild(d,a)},prepend:function(a,d){a.insertBefore(d,a.firstChild||null)},append:function(a,d){a.appendChild(d)}},l=j.string.$(),h=j.array.$(),i,m;return{info:{name:"Meta.dom"},_doc:document,$:function(){var a=["$"],d=arguments;if(d.length)a=a.concat(j.obj2array(d));else a.push(this.doc());return this.under.apply(this,a)},set:function(a, d){return this.under("set",a||this.doc(),d)},doc:function(a){if(!a)return this._doc=this._doc||document;if(!j.its(a,"string")){this._doc=a.nodeType==9?a:a.ownerDocument?a.ownerDocument:document;return this}if(v){this._doc=new ActiveXObject("Msxml2.DOMDocument");this._doc.async=false;this._doc.loadXML(a)}else this._doc=(new DOMParser).parseFromString(a,"text/xml");this.set(j.obj2array(this._doc.childNodes));return this},select:function(a){var d=this,g=[],k=j.select;if(d.len())d.forEach(function(n){g= g.concat(k(a,n))});else g=k(a,d.doc());d.set(g);return d},evalGlobal:function(a){var d=this.doc(),g=d.createElement("script"),k=d.getElementsByTagName("head")[0]||d.documentElement;g.type="text/javascript";if(v)g.text=a;else g.appendChild(d.createTextNode(a));k.insertBefore(g,k.firstChild);k.removeChild(g);return this},glue:function(a,d){if(a==="")return this;var g,k=this,n=f[d||"append"];d=k.$();var o=h.$(),q=h.$();if(a.nodeType)d.set(a);else typeof a=="string"?d.create(a):d.set(a);g=k.doc().createDocumentFragment(); d.forEach(function(p){if(p.nodeName.toLowerCase()=="script")o.push(p);else p.nodeType==1&&o.concat(j.obj2array(p.getElementsByTagName("script")));g.appendChild(p)});o.forEach(function(p){if(!p.src){q.push(p.text||p.textContent||p.innerHTML||"");p.parentNode.removeChild(p)}});q=q.join("\n");k.forEach(function(p,s){n(p,s?g.cloneNode(true):g,p.parentNode);q&&k.evalGlobal(q)});return k},remove:function(){for(var a=this._,d=a.length,g;d--;){g=a[d];g.parentNode&&g.parentNode.removeChild(g)}return this}, create:function(a){var d=this.doc().createElement("div"),g=[],k;if(this.isXML(d)){(k=m)||(k=b());k.innerHTML=a;j.dom.copyNodes(k.childNodes,d)}else if(v){d.innerHTML="<br>"+a;d.removeChild(d.firstChild)}else d.innerHTML=a;for(;k=d.firstChild;)g.push(d.removeChild(k));return this.set(g)},prop:function(a,d){return(d=this.get(d||0))?a in d?d[a]:null:d},attr:function(a,d){var g,k=this._;g=k.length;var n,o;if(!g)return null;n=k[0];o=n.attributes;if(!a)return o;if(d!==void 0){for(g=g;g--;)d===null&&k[g].removeAttribute? k[g].removeAttribute(a):k[g].setAttribute(a,d);return this}if(!o)return null;return n.getAttribute(a)},css:function(a,d){var g=this._,k=g.length;a=c(a);if(d===void 0)return k?g[0].style[a]:null;for(;k--;)g[k].style[a]=d;return this},style:function(a,d){if(d=this.get(d||0)){a=c(a);d=u.getComputedStyle?u.getComputedStyle(d,null).getPropertyValue(a):d.currentStyle[a]}return d},val:function(a){var d,g=[],k,n=this._,o=n.length,q=j.indexOf;if(a!==void 0){for(;o--;){d=n[o];if(d.nodeName=="SELECT"){a.push|| (a=[a]);k=d.options;for(d=k.length;d--;){g=k[d];g.selected=false;if(q(a,e(g),1)>-1)g.selected=true}}else d.value=a}return this}if(!o)return null;a=n[0];if(a.nodeName!="SELECT")return a.value||null;if(!a.multiple)return e(a.options[a.selectedIndex]);a=a.options;for(d in a)a[d].selected&&g.push(e(a[d]));return g},outer:function(a){var d=this._,g=d.length,k;a=d[a||0];if(!a||!a.nodeType)return null;if(a.nodeType==3)return a.nodeValue;if(!v){if(this.isXML(a))return(new XMLSerializer).serializeToString(a); d=this.doc().createElement("b");d.appendChild(a);return d.innerHTML}d=this.isXML(a)?"xml":"outerHTML";if(a.nodeType!=11)k=a[d];else{k=[];a=a.childNodes;for(g=a.length;g--;)k.push(a[g][d]);k.reverse();k=k.join("")}return k},inner:function(a,d){var g=this._,k="",n;if(a===void 0){if(!g.length)return null;d=g[0];if(!this.isXML(d))return d.innerHTML;a=this.$();d=d.childNodes;g=0;for(n=d.length;g<n;g++)k+=a.set(d[g]).outer();return k}return this.empty().append(a,d)},text:function(a){if(a===void 0){a=this._; if(!a.length)return null;a=a[0];return a.innerHTML?a.innerHTML.replace(/<\/?[^>]+>/gi,""):a.text||a.textContent}return this.empty().append(this.doc().createTextNode(a))},elements:function(a){var d=this._;if(!d.length)return null;var g=[],k=d[0];if(k.nodeName.toUpperCase()!="FORM")return null;k=k.elements;for(d=k.length;d--;)if(a===void 0)g.push(g[k[d].name]=k[d]);else if(k[d].name==a)return k[d];return a?null:g},submit:function(a){var d=this._;if(!d.length)return this;a=a||function(){};for(var g= this.elements(),k=this.$(),n=[],o=0,q,p,s;o<g.length;o++){s=g[o];if(s.nodeName.toUpperCase()!="FIELDSET")if(!(s.nodeName.toUpperCase()=="INPUT"&&(s.type.toLowerCase()=="checkbox"||s.type.toLowerCase()=="radio")&&!s.checked)){q=k.set(s).val();p=encodeURIComponent(s.name,1)+"=";j.its(q,"array")?j.each(q,function(y){n.push(p+encodeURIComponent(y===null||y===void 0?"":y,1))}):n.push(p+encodeURIComponent(q===null||q===void 0?"":q,1))}}j.ajax({url:d[0].action,callbacks:a,post:n.join("&")});return this}, nodes:function(a){var d=this._,g=[],k=d.length;a=a||0;if(k<=a)return null;k=d[a].childNodes;d=k.length;for(a=0;a<d;a++)k[a].nodeType==1&&g.push(k[a]);return g},empty:function(){for(var a,d=this._,g=d.length,k=this.isXML();g--;){a=d[g];if(k)for(;a.firstChild;)a.removeChild(a.firstChild);else a.innerHTML=""}return this},hasClass:function(a,d){var g=this._,k=g.length;d=d||0;if(k<=d)return false;d=g[d];if(!d.className)return false;return(" "+d.className+" ").indexOf(" "+a+" ")>-1},addClass:function(a){for(var d= this._,g=d.length,k;g--;){k=d[g];if("className"in k)k.className=l.set(h.set(k.className.split(" ")).insert(a).unique().get().join(" ")).trim().get()}return this},rmClass:function(a){for(var d=this._,g=d.length,k,n,o;g--;){k=d[g];if(k.className){n=h.set(k.className.split(" ")).unique();o=n.indexOf(a);if(o>-1)k.className=l.set(n.splice(o,1).get().join(" ")).trim().get()}}return this},dims:function(a){if(a=this.get(a||0)){for(var d=a.offsetLeft||0,g=a.offsetTop||0,k=a.offsetWidth||0,n=a.offsetHeight|| 0;a=a.offsetParent;){d+=a.offsetLeft-a.scrollLeft+(a.clientLeft?a.clientLeft:0);g+=a.offsetTop-a.scrollTop+(a.clientTop?a.clientTop:0)}a={left:d,top:g,width:k,height:n}}return a},scrollDims:function(a){return(a=this.get(a||0))?{left:a.scrollX||a.scrollLeft,top:a.scrollY||a.scrollTop,width:a.scrollWidth||0,height:a.scrollHeight||0}:a},opacity:function(a){var d=Math.round(a*100);return this.css("MozOpacity",a).css("opacity",a).css("KHTMLOpacity",a).css("zoom",1).css("filter","alpha(opacity="+d+")")}, hide:function(){return this.css("display","none")},show:function(a){return this.css("display",a||"")},parent:function(a){return this.prop("parentNode",a)},next:function(a){for(a=this.get(a||0);a&&(a=a.nextSibling)&&a.nodeType!=1;);return a},prev:function(a){for(a=this.get(a||0);a&&(a=a.previousSibling)&&a.nodeType!=1;);return a},first:function(a){for(a=this.prop("firstChild",a);a&&a.nodeType!=1;)a=a.nextSibling;return a},last:function(a){for(a=this.prop("lastChild",a);a&&a.nodeType!=1;)a=a.previousSibling; return a},value:function(a){return this.prop("nodeValue",a)},type:function(a){return this.prop("nodeType",a)},name:function(a){return this.prop("nodeName",a)},isXML:function(a){a||(a=this.doc());a=a.nodeType==9?a:a.ownerDocument;return a.documentElement.nodeName!=="HTML"}}}()).extend(function(){j.genProperties("prepend,append,before,after,replace",function(b){return function(c){return this.glue(c,b)}},this)}).extend(function(){var b={prependTo:"prepend",appendTo:"append",insertBefore:"before",insertAfter:"after", replaceIn:"replace"};j.genProperties("prependTo,appendTo,insertBefore,insertAfter,replaceIn",function(c){return function(e){var f=this._;return this.set(e).glue(f,b[c]).set(f)}},this)});j.dom.copyNodes=function(b,c,e,f){var l=c.ownerDocument?c.ownerDocument:c.nodeType==9?c:document,h=function(m,a){for(var d,g=0,k=a.length;g<k;g++){if(a[g].nodeType==1)d=m.appendChild(i(a[g]));else a[g].nodeType==3&&m.appendChild(l.createTextNode(a[g].nodeValue));if(f==a[g])f=d}},i=function(m){if(e&&m&&!m.id&&j.has(m, "uniqueID"))m.id=m.uniqueID;var a=j.dom.cloneTag(m);h(a,m.childNodes);return a};h(c,b);return f};j.dom.cloneTag=function(b,c){c=c||(b.ownerDocument?b.ownerDocument:document);c=c.createElement(b.nodeName.toLowerCase());var e;b=b.attributes;for(e=b.length;e--;)c.setAttribute(b[e].name,b[e].value);return c};j.dom.cloneNode=function(b,c){c=c||(b.ownerDocument?b.ownerDocument:document);if(b.nodeType==3)return c.createTextNode(b.nodeValue);c=j.dom.cloneTag(b,c);j.dom.copyNodes(b.childNodes,c);return c}; j.dom.ready=function(){var b=0,c,e,f=j.events.$(),l;f.extend({fireReady:function(){if(!b){b=1;this.fireEvent("ready",u);e&&clearInterval(e)}}});l=f.callback("fireReady");if(j.has(document,"addEventListener"))document.addEventListener("DOMContentLoaded",l,false);else if(j.has(u,"ActiveXObject")){c=document.createElement("script");c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){l();c.onreadystatechange=null}};c.defer=true;c.src="javascript:void(0);";document.getElementsByTagName("HEAD")[0].appendChild(c)}else if(/Safari/i.test(navigator.userAgent))e= setInterval(function(){/loaded|complete/.test(document.readyState)&&l()},10);j.dom.addEvent("load",u,l);return function(h){b?h():f.addEvent("ready",u,h)}}();j.dom.purge=function(b){if(v||b.attributes){var c=b.attributes,e,f;if(c)for(e=c.length;e--;){f=c[e].name;if(typeof b[f]==="function")b[f]=null}if(c=b.childNodes)for(e=c.length;e--;)j.dom.purge(c[e])}};j.dom.extend(j.animation)})();
